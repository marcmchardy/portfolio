<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <!-- development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="js/vue-google-maps.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-scrollto"></script>

    <link href="https://fonts.googleapis.com/css?family=EB+Garamond:400,600|Gravitas+One|Nunito+Sans:300,400|Source+Code+Pro&display=swap" rel="stylesheet">    <meta name="theme-color" content="#fafafa">
</head>

<body>

    <div id="app" class="container">
        <div class="row u-full-height">
          
            <div class="col--2 card u-m--10 u-of-hidden u-small-v-30">
                <google-map ref="yonderMap" :center="currentLocation" :zoom="6" style="width: 100%; height: 100%">
                    <gmap-marker
                        ref="marker"
                        :key="index"
                        v-for="(m, index) in locationMarks"
                        :position="m.location"
                        :icon="m.marker"
                        :clickable="true"
                        @click="selectMarker(index), updateMarker(index)"
                    />
                    <!-- 
                        To make polyline work with different colours / icons, may need to build an array of pairs of to-from coords
                        and then place the gmap-polyline within a v-for loop
                        each pair would have the corresponding icon
                        Make triangle icon green and larger for current transit + work out middle point of two locations to centre map

                        the var currentLocation should become a function and return the current location
                        if we're in transit it should return the average of the two points and center on that

                        look into a "bounds property"
                     -->
                    <gmap-polyline 
                        :key="index"
                        v-for="(locPairs, index) in locations"
                        :path="locPairs"
                        :options="locationMarks[index].polyIcon" 
                        >
                    </gmap-polyline>
                </google-map>
            </div>

            <div ref="scroller" id="scroller" class="col--1 u-full-height u-scroll-y">
                <h1 class="u-m--10 u-m--15 u-p--15 u-opacity--7" v-html="name"></h1>
                <div class="card card--white u-m--10" v-for="(dest, index) in itinerary" v-bind:id="'dest-'+ index" ref="destinations">
                    <div class="card_inner">
                        <h2 class="u-action-link u-m--10" v-on:click="centreTo(index)">{{dest.name}}</h2>
                        <time class="u-m--10">{{dest.start | simpleDate}}â€“{{dest.end | simpleDate}}</time class=" u-m--5">
                        <p class="u-m--10 u-mb--20" v-html="dest.notes"></p>
                        <div class="card card--no-shadow card--purple u-mb--10" v-for="day in dest.days">
                            <div class="u-p--10">
                                <time>{{day.date}}</time>
                            </div>
                            <ol class="activity_list">
                                <li class="activity_item u-p--10 u-text--purple" v-for="activity in day.activities">
                                    <strong class="activity_name">{{activity.name}}</strong>
                                    <span v-html="activity.desc"></span>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="navigation">
                    {{navIndex}}
                    {{currentIndex}}
                    <button class="navigation_item navigation_item-prev" :disabled="navIndex == 0" @click="navigate(navIndex, 'prev')">Prev</button>
                    <button class="navigation_item navigation_item-next" :disabled="navIndex == maxIndex" @click="navigate(navIndex, 'next')">Next</button>
                </div>
            </div>

        </div>
    </div>

    <script src="js/app.js"></script>

</body>